<!DOCTYPE html>
<!-- saved from url=(0075)https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_Rendering.html -->
<html lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        
        <title>渲染 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="./渲染 · GitBook_files/style.css">

    
            
                
                <link rel="stylesheet" href="./渲染 · GitBook_files/website.css">
                
            
                
                <link rel="stylesheet" href="./渲染 · GitBook_files/search.css">
                
            
                
                <link rel="stylesheet" href="./渲染 · GitBook_files/website(1).css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://gitbook.corp.sdo.com/intermediateclient/book/gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="https://gitbook.corp.sdo.com/intermediateclient/book/gitbook/images/favicon.ico" type="image/x-icon">

    
    
    
    

    <style></style><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><link rel="prev" href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_ResourcesMgr/Unity3D_ResourcesMgr.html"><link rel="next" href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_Profile/Unity_Profiler_CPU_GPU.html"></head>
    <body><div id="MathJax_Message" style="display: none;"></div>
        
<div class="book font-size-2 font-family-1 with-summary">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search">
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/">
            
                    
                    目录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="programming-language.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/programming-language.html">
            
                    
                    编程语言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="multithread.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/multithread.html">
            
                    
                    多线程编程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="network.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/network.html">
            
                    
                    网络编程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="unity.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/unity.html">
            
                    
                    Unity基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="unity-editor.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/unity-editor.html">
            
                    
                    Unity Editor基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="ui.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/ui.html">
            
                    
                    UI基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="3dMathAndRendering/3dMath.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/3dMathAndRendering/3dMath.html">
            
                    
                    3D数学基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="3dMathAndRendering/3dRendering.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/3dMathAndRendering/3dRendering.html">
            
                    
                    3D图形学基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="camera.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/camera.html">
            
                    
                    摄像机
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Unity3D_Animation/Unity3D_Animation.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_Animation/Unity3D_Animation.html">
            
                    
                    动画
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="Unity3D_physics.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_physics.html">
            
                    
                    物理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="Unity3D_ResourcesMgr/Unity3D_ResourcesMgr.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_ResourcesMgr/Unity3D_ResourcesMgr.html">
            
                    
                    资源管理
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.14" data-path="Unity3D_Rendering.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_Rendering.html">
            
                    
                    渲染
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="Unity3D_Profile/Unity_Profiler_CPU_GPU.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_Profile/Unity_Profiler_CPU_GPU.html">
            
                    
                    Profile
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com/" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <a class="btn pull-left js-toolbar-action" aria-label="" href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_Rendering.html#"><i class="fa fa-align-justify"></i></a><div class="dropdown pull-right js-toolbar-action"><a class="btn toggle-dropdown" aria-label="Share" href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_Rendering.html#"><i class="fa fa-share-alt"></i></a><div class="dropdown-menu dropdown-left"><div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div><div class="buttons"><button class="button size-5 ">Facebook</button><button class="button size-5 ">Google+</button><button class="button size-5 ">Twitter</button><button class="button size-5 ">Weibo</button><button class="button size-5 ">Instapaper</button></div></div></div><a class="btn pull-right js-toolbar-action" aria-label="" href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_Rendering.html#"><i class="fa fa-facebook"></i></a><a class="btn pull-right js-toolbar-action" aria-label="" href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_Rendering.html#"><i class="fa fa-twitter"></i></a><div class="dropdown pull-left font-settings js-toolbar-action"><a class="btn toggle-dropdown" aria-label="Font Settings" href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_Rendering.html#"><i class="fa fa-font"></i></a><div class="dropdown-menu dropdown-right"><div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div><div class="buttons"><button class="button size-2 font-reduce">A</button><button class="button size-2 font-enlarge">A</button></div><div class="buttons"><button class="button size-2 ">Serif</button><button class="button size-2 ">Sans</button></div><div class="buttons"><button class="button size-3 ">White</button><button class="button size-3 ">Sepia</button><button class="button size-3 ">Night</button></div></div></div><h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="https://gitbook.corp.sdo.com/intermediateclient/">渲染</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="unity渲染">Unity渲染</h1>
<p>本文档包含Light,Material,以及ShaderLab基础三个模块。</p>
<h2 id="light">Light</h2>
<p>Unity支持四种光照组件，分别是平行光（Directional Light），点光源（Point Light），聚光灯（SpotLight）以及区域光（AreaLight）.</p>
<h3 id="light参数介绍">Light参数介绍</h3>
<ul class="toc">
<li>官方文档： <a href="https://docs.unity3d.com/ScriptReference/Light.html" target="_blank">https://docs.unity3d.com/ScriptReference/Light.html</a></li>
<li>中文文档： <a href="http://www.ceeger.com/Components/class-Light.html" target="_blank">http://www.ceeger.com/Components/class-Light.html</a></li>
</ul>
<h3 id="light与着色器">Light与着色器</h3>
<ul>
<li>Directional Light：因为平行光模拟的是太阳光，在渲染光照着色阶段，不需要位置和衰减参数，主要提供方向和颜色属性（包含光照强度）。</li>
<li>Point Light：点光源离物体的距离会影响光照强度，点光源提供光源位置参数和范围（Range）参数，在着色前要计算光源衰减后的光照强度。</li>
<li>Spot Light：聚光灯和点光源类似，不同之处在于聚光灯有光照范围夹角参数，在计算衰减时需要考虑夹角。</li>
<li>AreaLight ：Unity的AreaLight只支持烘焙时候使用，不支持实时光照。</li>
</ul>
<h2 id="material">Material</h2>
<p>Material参数介绍
Unity引擎的材质组件是连接Shader和Mesh的桥梁。GameObject必须先添加MeshRenderer组件，然后才能在Material中按照索引添加指定材质。</p>
<h3 id="材质组件参数介绍">材质组件参数介绍</h3>
<ul>
<li>官方文档 ：<a href="https://docs.unity3d.com/ScriptReference/Material.html" target="_blank">https://docs.unity3d.com/ScriptReference/Material.html</a></li>
<li>中文文档 ：<a href="http://www.ceeger.com/Components/class-Material.html" target="_blank">http://www.ceeger.com/Components/class-Material.html</a></li>
</ul>
<h3 id="material和sharedmaterial">Material和SharedMaterial</h3>
<p>我们需要在脚本中修改材质属性时，通常有两个接口Renderer.material以及Renderer.sharedMaterial。</p>
<ul>
<li>Renderer.material ：<a href="https://docs.unity3d.com/ScriptReference/Renderer-material.html" target="_blank">https://docs.unity3d.com/ScriptReference/Renderer-material.html</a></li>
<li>Renderer.sharedMaterial ：<a href="https://docs.unity3d.com/ScriptReference/Renderer-sharedMaterial.html" target="_blank">https://docs.unity3d.com/ScriptReference/Renderer-sharedMaterial.html</a></li>
</ul>
<p>从文档中我们知道，修改Renderer.material仅修改当前对象的材质属性，而修改Renderer.sharedMaterial会修改所有使用这个材质的对象的材质属性。也就是说，同一个材质被多个对象引用时，使用Renderer.material会new一个新的实例，增加内存消耗，直到Application.LoadLevel() 或者Resources.UnloadUnusedAssets();的时候才会施放内存，甚至也可能造成内存泄露。所以如果相同条件下使用Renderer.sharedMaterial更高效。
如果对象身上需要修改材质的属性或者shader属性比较多的时候，可以第一次使用material，这样可以动态的生成一个material实例，然后再次调用修改参数时使用sharedmaterial，动态的修改这个新生成的material实例，而且不会创建新的material实例。</p>
<h3 id="材质球中的render-queue">材质球中的Render Queue</h3>
<p>Unity默认情况下会基于对象距离摄像机的远近来渲染。因此离相机越近的物体优先被渲染。然而特殊情况下（比如半透明物体），我们需要自己控制对象序列。Unity默认设置了以下几个渲染队列范围：</p>
<ul>
<li>Background ： 最优先被渲染，渲染队列为1000</li>
<li>Geometry ： 渲染绝大多数不透明物体，渲染队列为2000</li>
<li>AlphaTest : 需要半透明检测的使用这个队列渲染。渲染队列为2450</li>
<li>Trasparent : 半透明渲染发生在不透明和AlphaTest之后渲染，按照从后往前的顺序渲染半透明物体。 任何使用透明度混合的物体渲染都需要使用此队列。渲染队列为3000</li>
<li>Overlay :这个渲染队列主要实现一些叠加效果。渲染队列为4000</li>
</ul>
<h3 id="batch-rendering">Batch Rendering</h3>
<p>Batch Render 是大部分引擎提高渲染效率的方法，基本原理就是通过将一些状态一致渲染对象合成同一个批次提交给gpu进行绘制，如果不batch的话，就要提交给很多次，这可以显著的节省drawcall，实际上这主要节省了cpu的时间，cpu从提交多次到提交一次，对gpu来说也不用多次切换渲染状态。当然能batch的前提一定是渲染状态一致的一组物体。</p>
<p>Unity3d的批渲染分为两种，动态和静态.</p>
<ul>
<li>文档介绍 ：<a href="https://docs.unity3d.com/Manual/DrawCallBatching.html" target="_blank">https://docs.unity3d.com/Manual/DrawCallBatching.html</a></li>
</ul>
<h4 id="static-batching">Static Batching</h4>
<ul>
<li>要求：必须使用同一张material，然后在编辑器里设置为static batching的。</li>
<li>特点：静态批是无法运动的。</li>
</ul>
<p>所以一般制作流程上，对于场景这些静态的物体都采用静态批，美术会根据场景的规模，将相邻的一片物件的贴图合并到一张或几张1024或512的大图上，这样这些物件可以使用同一个material，就可以静态批在一起，大幅节省dc。
静态批的时候Unity3d会在运行时生成一个合并的大模型，并且为这个模型指定一张共同的贴图，所以这个批在一起的数量是有限的，如果批在一起的定点数过多，它就会自动分成两个批，一个静态批的上限为65535，这是因为Unity默认使用16位Mesh Index Buffer。</p>
<ul>
<li>详情请阅读 ：<a href="https://docs.unity3d.com/ScriptReference/Rendering.IndexFormat.html" target="_blank">https://docs.unity3d.com/ScriptReference/Rendering.IndexFormat.html</a></li>
</ul>
<h4 id="dynamic-batching">Dynamic batching</h4>
<p>动态批是对那些没有标记成static batching的物体在runtime unity自动将他们批在一起，这个是可以支持运动物体的，要求如下：</p>
<ul>
<li>一般批次总顶点单元少于900,如果Shader仅仅使用Vertex，Normal，UV0，则可以增加300个顶点单元。</li>
<li>批在一起的所有的模型应用同样的缩放值</li>
<li>使用相同的材质</li>
<li>相同的一张lightmap</li>
<li>不能使用多pass的shader</li>
<li>不能接收阴影</li>
</ul>
<h2 id="shaderlab">ShaderLab</h2>
<p>ShaderLab是Unity内置Shader框架，可以支持CG/HLSL/GLSL等语言镶嵌在ShaderLab中。Unity引擎使用ShaderLab编写着色器程序，可进行跨平台编译。</p>
<h4 id="shaderlab-结构">ShaderLab 结构</h4>
<p>首先了解一下Unity ShaderLab基本组成结构，</p>
<pre><code>Shader "name"{
    [Properties]
    SubShaders
    [FallBack]
}
</code></pre><p>Properties允许在Unity材质面板中定义一些Shader参数比如颜色，贴图等等，用来支持我们在Shader中使用这些参数。
SubShaders即Shader主体部分，给GPU渲染提供程序片段。Unity引擎ShaderLab允许多个SubShader存在，但同时参与渲染的只能是其中一个SubShader，引擎将通过硬件情况来筛选出从上往下第一个硬件支持的SubShader。所以SubShader存在的意义在于区别不同硬件条件下不同的渲染方式。如果没有SubShader支持，那么FallBack提供的Shader来渲染。</p>
<ul>
<li>官方文档资料 ： <a href="https://docs.unity3d.com/Manual/SL-Shader.html" target="_blank">https://docs.unity3d.com/Manual/SL-Shader.html</a></li>
<li>中文文档 ： <a href="http://www.ceeger.com/Components/SL-Shader.html" target="_blank">http://www.ceeger.com/Components/SL-Shader.html</a></li>
</ul>
<h3 id="properties">Properties</h3>
<p>下列是常见的属性类型。</p>
<pre><code>Shader "Custom/AAA" {        

     //定义properties着色器输入属性,提供给所有子着色器使用。每句后不能加分号 ; 浮点数不能加 f                                        

     Properties {   

    //定义浮点数                                                                  

    _Float("浮点数",Float)=0.5    

   //定义带范围浮点数                                      

    _FloatRange("限定范围的浮点数",Range(0,1))=0  

   //定义四个元素的向量 Vector    

    _Vector("Vector向量",Vector)=(1,1,1,1)     

   //定义颜色   RGBA                  

    _Color("颜色",Color)=(0.5,0.5,0.5,1)    

   //定义2D贴图,2的阶数大小（256，512之类）的贴图。这张贴图将在采样后被转为对应基于模型UV的每个像素的颜色，最终被显示出来                       

    _2DTexture ("2D贴图", 2D) = "white" {}  

   //定义长方形贴图        非2阶数大小的贴图                                

    _Rect("Rect",Rect)="white" {}          

   //定义立方体贴图        在Project中创建的Cubemap，主要用来做反射效果（比如天空盒动态反射），也会被转换为对应点的采样                           

    _CubeTexture ("Cube贴图", Cube) = "white" {TexGen ObjectLinear}         

}
</code></pre><p>在Properties中定义以后，SubShader需要声明即可使用这些参数。</p>
<h3 id="subshader">SubShader</h3>
<p>SubShader结构如下：</p>
<pre><code>SubShader {
    Tags { "RenderType"="Opaque" }
    Pass
    {
        Tags{ "LightMode" = "ForwardBase" "Queue" = "Geometry"}
        ...
    }
}
</code></pre><p>Tag用来标记什么情况下会使用此着色器或者Pass，例如此处的Queue就是规定在不透明渲染情况下会使用此Pass.</p>
<ul>
<li>Tag： <a href="https://docs.unity3d.com/Manual/SL-PassTags.html" target="_blank">https://docs.unity3d.com/Manual/SL-PassTags.html</a></li>
</ul>
<h4 id="pass">Pass</h4>
<p>Shader主体结构如下：</p>
<pre><code>CGPROGRAM
#pragma vertex vert
#pragma fragment frag
void vert{
}
void frag{
}
ENDCG
</code></pre><ul>
<li>CGPROGRAM和ENDCG告诉编译器此代码块使用CG语言同样可以使用HLSLPROGRAM等等</li>
<li>使用#pragma vertex vert 告诉编译器vert函数是顶点着色器的入口，#pragma fragment frag声明frag函数是片段着色器入口。</li>
</ul>
<h4 id="hlsl-语法手册">HLSL 语法手册</h4>
<ul>
<li>HLSL 官方参考手册 ：<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/bb509561(v=vs.85).aspx" target="_blank">https://msdn.microsoft.com/en-us/library/windows/desktop/bb509561(v=vs.85).aspx</a></li>
<li>中文语法介绍 : <a href="https://blog.csdn.net/ddupd/article/details/41705953" target="_blank">https://blog.csdn.net/ddupd/article/details/41705953</a></li>
</ul>
<h4 id="glsl-手册">GLSL 手册</h4>
<ul>
<li>GLSL 中文语法 ： <a href="https://www.cnblogs.com/kex1n/p/3941680.html" target="_blank">https://www.cnblogs.com/kex1n/p/3941680.html</a></li>
<li>GLSL 官方各版本参考手册（需翻墙） ： <a href="https://www.khronos.org/registry/OpenGL-Refpages/" target="_blank">https://www.khronos.org/registry/OpenGL-Refpages/</a></li>
</ul>
<h4 id="cg-手册">CG 手册</h4>
<ul>
<li>CG 官方参考手册（需翻墙） ：<a href="http://developer.download.nvidia.com/cg/Cg_3.1/Cg-3.1_April2012_ReferenceManual.pdf" target="_blank">http://developer.download.nvidia.com/cg/Cg_3.1/Cg-3.1_April2012_ReferenceManual.pdf</a></li>
<li>CG 语法中文基础 ：<a href="https://blog.csdn.net/linshuhe1/article/details/51670638" target="_blank">https://blog.csdn.net/linshuhe1/article/details/51670638</a></li>
<li>CG 内置函数库 ：<a href="https://blog.csdn.net/qq_35817700/article/details/77402590" target="_blank">https://blog.csdn.net/qq_35817700/article/details/77402590</a></li>
</ul>
<h4 id="unity-shader内置库文件">Unity Shader内置库文件</h4>
<p>Unity提供了常用函数库和跨平台编译库，这些文件都是以.cginc后缀。这些文件存放在引擎根目录\Editor\Data\CGIncludes下。</p>
<ul>
<li>HLSLSupport.cginc：自动包含，一些跨平台编译相关的宏和定义。</li>
<li>UnityShaderVariables.cginc：自动包含，常用的全局变量。</li>
<li>UnityCG.cginc：常用的全局变量和函数。</li>
<li>AutoLight.cginc：光影相关帮助函数，surface shader内部使用此文件。</li>
<li>Lighting.cginc：surface shader自动包含，定义了标准的光照模式。</li>
<li>TerrainEngin.cginc：地形和植被shader相关的帮助函数。</li>
</ul>
<p>更多关于Unity Shader预处理宏、常用内置变量、多版本编译等详情参照：</p>
<ul>
<li><a href="http://www.cnblogs.com/sifenkesi/p/4716047.html" target="_blank">http://www.cnblogs.com/sifenkesi/p/4716047.html</a></li>
</ul>
<h3 id="shaderlab-拓展">ShaderLab 拓展</h3>
<ul>
<li><a href="https://docs.unity3d.com/Manual/SL-AdvancedTopics.html" target="_blank">https://docs.unity3d.com/Manual/SL-AdvancedTopics.html</a></li>
</ul>
<h3 id="视频-渲染profile"><a href="https://gitbook.corp.sdo.com/intermediateclient/video_Rendering.html">视频-渲染&amp;Profile</a></h3>
<script type="text/javascript">var targetUl = document.getElementsByClassName('page-inner')[0].getElementsByTagName('ul')[0];if(targetUl.getElementsByTagName('a').length>0){targetUl.className='toc';}</script>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_ResourcesMgr/Unity3D_ResourcesMgr.html" class="navigation navigation-prev " aria-label="Previous page: 资源管理">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_Profile/Unity_Profiler_CPU_GPU.html" class="navigation navigation-next " aria-label="Next page: Profile" style="margin-right: 0px;">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"渲染","level":"1.14","depth":1,"next":{"title":"Profile","level":"1.15","depth":1,"path":"book/Unity3D_Profile/Unity_Profiler_CPU_GPU.md","ref":"book/Unity3D_Profile/Unity_Profiler_CPU_GPU.md","articles":[]},"previous":{"title":"资源管理","level":"1.13","depth":1,"path":"book/Unity3D_ResourcesMgr/Unity3D_ResourcesMgr.md","ref":"book/Unity3D_ResourcesMgr/Unity3D_ResourcesMgr.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["mathjax","toc"],"pluginsConfig":{"toc":{"addClass":true,"className":"toc"},"mathjax":{"forceSVG":false,"version":"2.6-latest"},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"book/Unity3D_Rendering.md","mtime":"2019-05-05T03:07:15.842Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-11-22T03:39:59.338Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="./渲染 · GitBook_files/gitbook.js.下载"></script>
    <script src="./渲染 · GitBook_files/theme.js.下载"></script>
    
        
        <script src="./渲染 · GitBook_files/MathJax.js.下载" id=""></script>
        
    
        
        <script src="./渲染 · GitBook_files/plugin.js.下载"></script>
        
    
        
        <script src="./渲染 · GitBook_files/search-engine.js.下载"></script>
        
    
        
        <script src="./渲染 · GitBook_files/search.js.下载"></script>
        
    
        
        <script src="./渲染 · GitBook_files/lunr.min.js.下载"></script>
        
    
        
        <script src="./渲染 · GitBook_files/search-lunr.js.下载"></script>
        
    
        
        <script src="./渲染 · GitBook_files/buttons.js.下载"></script>
        
    
        
        <script src="./渲染 · GitBook_files/fontsettings.js.下载"></script>
        
    

    


</body></html>