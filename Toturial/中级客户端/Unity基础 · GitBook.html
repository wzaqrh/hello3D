<!DOCTYPE html>
<!-- saved from url=(0063)https://gitbook.corp.sdo.com/intermediateclient/book/unity.html -->
<html lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        
        <title>Unity基础 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="./Unity基础 · GitBook_files/style.css">

    
            
                
                <link rel="stylesheet" href="./Unity基础 · GitBook_files/website.css">
                
            
                
                <link rel="stylesheet" href="./Unity基础 · GitBook_files/search.css">
                
            
                
                <link rel="stylesheet" href="./Unity基础 · GitBook_files/website(1).css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://gitbook.corp.sdo.com/intermediateclient/book/gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="https://gitbook.corp.sdo.com/intermediateclient/book/gitbook/images/favicon.ico" type="image/x-icon">

    
    
    
    

    <style></style><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><link rel="prev" href="https://gitbook.corp.sdo.com/intermediateclient/book/network.html"><link rel="next" href="https://gitbook.corp.sdo.com/intermediateclient/book/unity-editor.html"></head>
    <body><div id="MathJax_Message" style="display: none;"></div>
        
<div class="book font-size-2 font-family-1 with-summary">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search">
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/">
            
                    
                    目录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="programming-language.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/programming-language.html">
            
                    
                    编程语言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="multithread.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/multithread.html">
            
                    
                    多线程编程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="network.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/network.html">
            
                    
                    网络编程
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5" data-path="unity.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/unity.html">
            
                    
                    Unity基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="unity-editor.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/unity-editor.html">
            
                    
                    Unity Editor基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="ui.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/ui.html">
            
                    
                    UI基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="3dMathAndRendering/3dMath.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/3dMathAndRendering/3dMath.html">
            
                    
                    3D数学基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="3dMathAndRendering/3dRendering.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/3dMathAndRendering/3dRendering.html">
            
                    
                    3D图形学基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="camera.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/camera.html">
            
                    
                    摄像机
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Unity3D_Animation/Unity3D_Animation.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_Animation/Unity3D_Animation.html">
            
                    
                    动画
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="Unity3D_physics.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_physics.html">
            
                    
                    物理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="Unity3D_ResourcesMgr/Unity3D_ResourcesMgr.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_ResourcesMgr/Unity3D_ResourcesMgr.html">
            
                    
                    资源管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="Unity3D_Rendering.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_Rendering.html">
            
                    
                    渲染
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="Unity3D_Profile/Unity_Profiler_CPU_GPU.html">
            
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/Unity3D_Profile/Unity_Profiler_CPU_GPU.html">
            
                    
                    Profile
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com/" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <a class="btn pull-left js-toolbar-action" aria-label="" href="https://gitbook.corp.sdo.com/intermediateclient/book/unity.html#"><i class="fa fa-align-justify"></i></a><div class="dropdown pull-right js-toolbar-action"><a class="btn toggle-dropdown" aria-label="Share" href="https://gitbook.corp.sdo.com/intermediateclient/book/unity.html#"><i class="fa fa-share-alt"></i></a><div class="dropdown-menu dropdown-left"><div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div><div class="buttons"><button class="button size-5 ">Facebook</button><button class="button size-5 ">Google+</button><button class="button size-5 ">Twitter</button><button class="button size-5 ">Weibo</button><button class="button size-5 ">Instapaper</button></div></div></div><a class="btn pull-right js-toolbar-action" aria-label="" href="https://gitbook.corp.sdo.com/intermediateclient/book/unity.html#"><i class="fa fa-facebook"></i></a><a class="btn pull-right js-toolbar-action" aria-label="" href="https://gitbook.corp.sdo.com/intermediateclient/book/unity.html#"><i class="fa fa-twitter"></i></a><div class="dropdown pull-left font-settings js-toolbar-action"><a class="btn toggle-dropdown" aria-label="Font Settings" href="https://gitbook.corp.sdo.com/intermediateclient/book/unity.html#"><i class="fa fa-font"></i></a><div class="dropdown-menu dropdown-right"><div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div><div class="buttons"><button class="button size-2 font-reduce">A</button><button class="button size-2 font-enlarge">A</button></div><div class="buttons"><button class="button size-2 ">Serif</button><button class="button size-2 ">Sans</button></div><div class="buttons"><button class="button size-3 ">White</button><button class="button size-3 ">Sepia</button><button class="button size-3 ">Night</button></div></div></div><h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="https://gitbook.corp.sdo.com/intermediateclient/">Unity基础</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h3 id="unity-基础">Unity 基础</h3>
<h5 id="monobehaviour-理解与使用">MonoBehaviour 理解与使用</h5>
<p>Unity中，脚本的职责就是做GameObject的逻辑驱动，所有需要挂载到GameObject上面的脚本，都需要继承自MonoBehaviour，MonoBehaviour是Unity中所有脚本驱动的基类（当你使用C#作为脚本语言时）。MonoBehaviour有一些事件函数会在特定的时间被调用，Unity的MonoBehaviour脚本的生命周期示意图如下：</p>
<p><img src="./Unity基础 · GitBook_files/20170514144720931.png" alt=""></p>
<p> Awake和Start：Awake在每次生命周期开始的时候被调用，之后会调用OnEnable函数，但是在Awake函数中如果调用this.enable=false；直接调用onDisable函数，另外你也可以在其他脚本或者逻辑直接调用this.enable=true；启动脚本，启动脚本后，会检测之前有没有调用过Start函数，如果没有，那么将调用Start函数，所以区别是Start会在Awake之后调用并且它的调用与否取决于this.enable。</p>
<p>​       Update，FixedUpdate和LateUpdate：Update函数顾名思义，会在每一帧被调用，我们可以在这个函数中控制物体的位置从而实现物体的移动等等，但是需要注意的是，要尽量避免在Update中调用比较耗费效率的操作，因为它每帧都会被调用，同样的原则适用于FixedUpdate和LateUpdate。FixedUpdate与Update的不同在于，Update在每帧被调用，但是调用时间不确定，所以我们要实现一个物体匀速运动是，是无法通过Update准确实现的，但是我们可以在FixedUpdate中实现，因为它在确定的时间间隔中被调用，LateUpdate如图所示，它会在所有update被调用后调用，这个函数可以在我们编写ai时被使用，因为我们要当所有物体和怪物移动过后再判断物体的一些策略，比如开枪等，这个时候就可以在LateUpdate中编写，因为LateUpdate基本可以保证所有物体在本帧的移动等操作均已经完成。</p>
<pre><code>using System.Collections;  
using System.Collections.Generic;  
using UnityEngine;  
using System.IO;  
/* 
 * 所有类的基类，逐步加入全局功能 
 * 2017-5-1 收集报错信息 
 */  
public class BaseMonoBehaviour : MonoBehaviour {  

    //输出句柄  
    private System.IO.StreamWriter ExceptionStreamWriter;  
    //报错文件名  
    public string ExceptionFileName = "log.txt";  

    void Awake () {  
        ExceptionStreamWriter = new System.IO.StreamWriter (Application.persistentDataPath + "/" + ExceptionFileName);  
        Debug.Log (Application.persistentDataPath + "/" + ExceptionFileName);  
    }  

    void Update () {  

    }  

    void OnEnable() {  
        //注册报错  
        Application.logMessageReceived += LogCallback;  
    }  

    void OnDisable() {  
    }  

    void OnDestroy() {  
        ExceptionStreamWriter.Close ();  
    }  

    //收集报错  
    void LogCallback(string logString, string stackTrace, LogType type) {  
        if (type == LogType.Exception || type == LogType.Error) {  
            ExceptionStreamWriter.WriteLine ("Logged at: " + System.DateTime.Now.ToString () + " - Log Des: " + logString + " - Trace:" + stackTrace + " - Type:"  
                + type.ToString());  
        }  
    }  
}
</code></pre><p> 在OnEnable函数中注册收集报错函数，注意，这是Unity5新修改的注册方式，以前是通过调用函数注册，当LogCallback注册函数被调用的时候，就可以通过输出文件（或者将报错发到服务器）的方式收集报错，方便我们在游戏测试上线的过程中收集查询bug。
​      最后，发现知乎上有一个关于是否要继承MonoBehaviour的讨论：<a href="https://www.zhihu.com/question/31163311" target="_blank">https://www.zhihu.com/question/31163311</a>，个人也有一些看法，我觉得这是个伪命题，因为当我们要把一个脚本绑定在GameObject上时，继承MonoBehaviour几乎是必须的，这样我们才能启动我们的脚本，因为Unity不是程序驱动，而是由场景驱动脚本，脚本也是资源的一部分，当我们的类是个纯逻辑类或者工具类全局类时，这时候就不必继承MonoBehaviour，当然就算继承自MonoBehaviour，它的事件函数也会因为没有绑定在GameObject上从而不会被调用，也就不存在性能问题，当然，为了代码整体的整洁和规范，可以规定只有需要绑定在GameObject上的脚本才继承自MonoBehaviour（本框架中采用baseMonoBehaviour）</p>
<h6 id="fixedupdate">FixedUpdate</h6>
<p>Unity的主要逻辑是单线程的，所以也不存在有不同的逻辑循环可能，换句话说Update和FixedUpdate是在同一个线程上调用的.</p>
<p>FixedUpdate并不是间隔固定时间才调用一次，相反，它有可能在Update之前<strong>调用多次</strong>.</p>
<p>某次Update之前连续调用了11次FixedUpdate，而之后每次Update调用之前都会调用1~2次FixedUpdate方法，这也很好理解，因为FixedUpdate的频率是50FPS，而我们设定的更新频率为30FPS，FixedUpdate的调用次数势必要多于Update。</p>
<p>所以，FixedUpdate除了用来处理物理逻辑之外并不适合处理其他模块的逻辑，尤其是当大家的潜意识里都笃定它的更新频率是固定的时候。因为这很危险，比如一个需要状态同步的游戏要求按照固定的频率向目标同步状态，如果贸然采用FixedUpdate方法，就会出现上图那样可能在短时间内多次调用的问题。<strong>所以最好只在物理逻辑的处理中使用FixedUpdate，而不要滥用</strong>。而由于FixedUpdate主要是用于物理逻辑的，因此下文的讨论也主要围绕物理逻辑。</p>
<p>一个最简单的固定增量时间的实现，显然就是将固定的增量时间作为一个<strong>常量参数</strong>传递给物理模拟模块，这样我们就能够保证物理模拟的增量时间固定，同时还能将物理模拟的更新频率和游戏引擎的更新频率进行解耦——物理的模拟不受引擎的更新频率影响，无论游戏的更新频率是多少，传递给物理模拟的增量时间都是一个常量。</p>
<p>这里还拿Unity引擎来举例子，默认情况下项目的Fixed Timestep的值为0.02s。也就是说物理模拟的频率是50FPS，假设我们的游戏的更新频率是25FPS，那么会发生什么呢？没错，游戏每1次Update时，物理模拟都要推进2次，也就是之前我们看到的在Update之前多次调用了FixedUpdate。那么如果我们的游戏更新频率是100FPS呢？这次就变成了每2次Update调用1次FixedUpdate。</p>
<p>这也就解释了为何有的朋友在做相关的小测试的时候，在每次FixedUpdate内打印Time.deltaTime时输出的都是0.02了，因为Time.deltaTime并非两次调用FixedUpdate之间真实的时间间隔，而是来自我们在项目的Time设置内设置的值——它是一个与真实时间无关的常量。</p>
<p>FixedUpdate是属于物理模拟模块的，同时在主循环的内部，物理模拟的部分还有一个二级循环。</p>
<p>参考: <a href="https://www.cnblogs.com/murongxiaopifu/p/7683140.html" target="_blank">https://www.cnblogs.com/murongxiaopifu/p/7683140.html</a></p>
<h5 id="coroutine理解及使用">Coroutine理解及使用</h5>
<p><strong>一、yield的在几种语言中的程序执行特性</strong>：</p>
<p>​     Lua中的yield是使得协同函数运行-&gt;挂起并且传递参数给resume。resume使得协同函数挂起-&gt;运行并且传递参数给协同函数。</p>
<p>​     C#中yield return/break是用于函数查询集合生成器里面的值(类似迭代)返回，并记录当前现场，下次查询时从上一次记录的yield现场处，继续往下执行，直到继续往下执行没有了，那么退出这段yield的逻辑。yield break会终止掉yield迭代逻辑并跳出。
YieldImplementation：
   1).Caller callsfunction
   2).Caller requestsitem 按需请求一个元素
   3).Next itemreturned 返回请求的元素
   4).Goto step #2</p>
<p>​    Python中的yield expression, 有yield的函数就变成了一个生成器，调用该函数返回的是迭代器对象，用迭代器对象调用next方法(或者循环中会自动调用next方法)，才开始执行函数，执行到yield expression处则中断，返回迭代器当前的值，并保留现场，下次调用next则从现场处开始执行，迭代完了就停止了。可以看出Python中的yield和C#中的yield是类似的，用于创建生成器，执行时中断返回迭代器值，并记录现场，下次从现场处继续执行。</p>
<p>   Unity中的yield就是和C#,python中的类似，因为unity是基于.net框架的，且unity脚本开始是用Boo(Python的一个变种)写的。只是unity中多了coroutine特性类型，和StartCoroutine的coroutine管理类。StartCoroutine不是启动了一个新的线程，而是开启一个协同程序，默认unity所有代码都在一个线程中(<a href="http://answers.unity3d.com/questions/280597/new-thread-vs-startcoroutine.html" target="_blank">http://answers.unity3d.com/questions/280597/new-thread-vs-startcoroutine.html</a>)。</p>
<p>coroutine语言层面的原理：</p>
<p>在两年前，协程似乎是一个很高级的东西，随后大多数语言或多或少都支持协程。我比较熟悉的有Python的gevent，Lua的coroutine，Go的goroutine。尤其是Lua和Go，语言本身就支持协程。协程也被叫做轻量级线程。通俗点讲就是定义一大堆任务，然后通过一个线程轮着对每个任务都执行一下，协作运行。它的厉害之处在于每运行到一个任务的时候，它都可以从这个任务上一次中断的地方开始运行。在我们一般的印象中，只有操作系统对线程进行调度的时候才会干这样的事情，进行各种进栈，保存状态。而协程，总共也只是运行在一个线程中，要是使用线程本身的系统栈，早就爆了。因此在这里，实现的时候是用内存来模拟栈的操作。具体实现，我想复杂度一定会不小。</p>
<p>我们知道，线程比进程轻量级，因此产生一个线程消耗的资源比进程少，上下文切换也比进程节约。而协程比线程更加轻量级，上下文切换更是迅速。于是在服务器编程方面给人无限想象。尽管目前还没有出现一款主流的采用协程的web服务器。但是Go语言开发的<a href="http://www.techempower.com/benchmarks/#section=data-r4" target="_blank">web服务</a>的性能已经崭露头角了。</p>
<p><strong>二、Unity官方文档对coroutine的解释</strong>：</p>
<p>Normal coroutine updates are run after theUpdate function returns. Acoroutine is a function that can suspend its execution (yield) until the givenYieldInstruction finishes. Different uses of Coroutines</p>
<p>yield; The coroutine will continue after all Update functionshave been calledon the next frame.</p>
<p>yield WaitForSeconds(2); Continueafter a specified time delay, after all Update functions have been called for theframe.</p>
<p>yield WaitForFixedUpdate(); Continue afterall FixedUpdate has been called on all scripts.</p>
<p>yield WWWContinue aftera WWW download has completed</p>
<p>yield StartCoroutine(MyFunc); Chains the coroutine, and will wait for the MyFunc coroutine to completefirst.</p>
<p> C#要在yield coroutine之间加上return关键字。</p>
<p><strong>三、Unity中的Coroutine原理猜测</strong>：</p>
<p><strong>     虚拟机分段执行机制， 同类型嵌套用栈存放实现串行执行</strong>：.NET虚拟机在每一帧循环中, 会依次进入每个编译器预定义好的入口。对于Coroutine类型，编译器需要产生一些代码，在Coroutine类型指定的时间或事件完成后(.net的虚拟机用函数指针进行标记管理现场和在流程中每帧检查时间或者事件满足后发送消息，将cpu所有权交给yield中断的现场，或是通过包含不同Coroutine迭代器的多个管理类管理各个coroutine, 每帧用coroutine子类通过多态检查时间或事件到达，将cpu所有权交给coroutine子类中断的现场)，从yield中断后的代码处继续往下执行, 这样就形成了我们看到的一个function能分段执行的机制。</p>
<p>​     而对于嵌套Coroutine类型，会串行的执行而不是并行的，可能.net虚拟机对于同coroutine类型用栈存放，栈顶的先执行，从而实现串行执行,如果外层的不使用yield return，那么不会串行执行，而是并行执行。于是就可以解释上面例子中的执行次序问题。</p>
<p> 见：<a href="http://www.richardfine.co.uk/2012/10/unity3d-monobehaviour-lifecycle/" target="_blank">http://www.richardfine.co.uk/2012/10/unity3d-monobehaviour-lifecycle/</a></p>
<p><strong>其实yield WaitForSeconds/null/WaitForEndOfFrame都是通过整个游戏While循环来驱动的，Yield只是交出控制权给外部主线程且Coroutine设置事件挂起Coroutine协程(不是线程只是分段执行机制），当事件发生时候（不用下一帧到达，但是要在固定时间段内Update前或者后或Render后，超过了就会到下一帧）则进入协程里面的代码。</strong></p>
<p><strong>四、Unity中使用Coroutine需要注意的问题：</strong></p>
<p><strong>1.使用的地方和不能使用的地方：</strong></p>
<p>必须在MonoBehaviour或继承于MonoBehaviour的类中调用 yield coroutine。yield不可以在Update或者FixedUpdate里使用。</p>
<p><strong>2.开启协程：</strong></p>
<p>StartCoroutine(string methodName)和StartCoroutine(IEnumeratorroutine)都可以开启一个协程，</p>
<p>区别：</p>
<p>使用字符串作为参数时，开启协程时最多只能传递一个参数，并且性能消耗会更大一点; 而使用IEnumerator 作为参数则没有这个限制。</p>
<p><strong>3.删除协程：</strong></p>
<p>1).在Unity3D中，使用StopCoroutine(stringmethodName)来终止该MonoBehaviour指定方法名的一个协同程序，使用StopAllCoroutines()来终止所有该MonoBehaviour可以终止的协同程序。</p>
<p>包括StartCoroutine(IEnumerator routine)的。</p>
<p>2).还有一种方法可以终止协同程序，即将协同程序所在gameobject的active属性设置为false，当再次设置active为ture时，协同程序并不会再开启；</p>
<p>如是将协同程序所在脚本的enabled设置为false则不会生效。</p>
<p><strong>4.js和C#中使用区别：</strong></p>
<p>在C#中要使用 yield return而不是yield。</p>
<p>C#中yield（中断）语句必须要在IEnumerator类型里，C#方法的返回类型为IEnumerator，返回值如（eg:yield return new WaitForSeconds(2); 或者 yield returnnull);</p>
<p><strong>5.协程函数返回值和参数类型，组合的设计模式：</strong></p>
<p>协同程序的返回类型为Coroutine类型。在Unity3D中，Coroutine类继承于YieldInstruction，所以，协同程序的返回类型只能为null、等待的帧数(frame)以及等待的时间。</p>
<p>协同程序的参数不能指定ref、out参数。但是，我们在使用WWW类时会经常使用到协同程序，由于在协同程序中不能传递参数地址(引用)，也不能输出对象，</p>
<p>这使得每下载一个WWW对象都得重写一个协同程序，解决这个问题的方法是建立一个基于WWW的类（<strong>用组合模式来解决-其实就是不通过函数传参全局关联一个对象了</strong>），</p>
<p>参考: <a href="https://blog.csdn.net/blues1021/article/details/40959915" target="_blank">https://blog.csdn.net/blues1021/article/details/40959915</a></p>
<h3 id="视频-基础知识相关"><a href="https://gitbook.corp.sdo.com/intermediateclient/video_Basic.html">视频-基础知识相关</a></h3>
<script type="text/javascript">var targetUl = document.getElementsByClassName('page-inner')[0].getElementsByTagName('ul')[0];if(targetUl.getElementsByTagName('a').length>0){targetUl.className='toc';}</script>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/network.html" class="navigation navigation-prev " aria-label="Previous page: 网络编程">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="https://gitbook.corp.sdo.com/intermediateclient/book/unity-editor.html" class="navigation navigation-next " aria-label="Next page: Unity Editor基础" style="margin-right: 0px;">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Unity基础","level":"1.5","depth":1,"next":{"title":"Unity Editor基础","level":"1.6","depth":1,"path":"book/unity-editor.md","ref":"book/unity-editor.md","articles":[]},"previous":{"title":"网络编程","level":"1.4","depth":1,"path":"book/network.md","ref":"book/network.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["mathjax","toc"],"pluginsConfig":{"toc":{"addClass":true,"className":"toc"},"mathjax":{"forceSVG":false,"version":"2.6-latest"},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"book/unity.md","mtime":"2019-06-11T03:26:54.183Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-11-22T03:39:59.338Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="./Unity基础 · GitBook_files/gitbook.js.下载"></script>
    <script src="./Unity基础 · GitBook_files/theme.js.下载"></script>
    
        
        <script src="./Unity基础 · GitBook_files/MathJax.js.下载" id=""></script>
        
    
        
        <script src="./Unity基础 · GitBook_files/plugin.js.下载"></script>
        
    
        
        <script src="./Unity基础 · GitBook_files/search-engine.js.下载"></script>
        
    
        
        <script src="./Unity基础 · GitBook_files/search.js.下载"></script>
        
    
        
        <script src="./Unity基础 · GitBook_files/lunr.min.js.下载"></script>
        
    
        
        <script src="./Unity基础 · GitBook_files/search-lunr.js.下载"></script>
        
    
        
        <script src="./Unity基础 · GitBook_files/buttons.js.下载"></script>
        
    
        
        <script src="./Unity基础 · GitBook_files/fontsettings.js.下载"></script>
        
    

    


</body></html>